# SubGen-Azure-Batch Environment Configuration
# Copy this file to .env and fill in your values
# https://github.com/TimoVerbrugghe/subgen-azure-batch

# ==============================================================================
# AZURE SPEECH SERVICES (REQUIRED)
# ==============================================================================
# Get your key from: https://portal.azure.com -> Speech Services
AZURE_SPEECH_KEY=your-azure-speech-key-here
AZURE_SPEECH_REGION=swedencentral

# ==============================================================================
# AZURE BLOB STORAGE (REQUIRED)
# ==============================================================================
# The Batch Transcription API requires audio files to be accessible via URL.
# SubGen-Azure-Batch uploads audio to Azure Blob Storage and uses SAS tokens.
# Get your connection string from: Azure Portal -> Storage Account -> Access Keys
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=youraccount;AccountKey=yourkey;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER=transcription-audio

# ==============================================================================
# GENERAL SETTINGS
# ==============================================================================
# Enable debug logging
DEBUG=false

# Comma-separated list of media folders to show in the Web UI
MEDIA_FOLDERS=/tv,/movies

# Default subtitle language (leave empty to auto-detect)
SUBTITLE_LANGUAGE=

# ==============================================================================
# PROCESSING SETTINGS
# ==============================================================================
# Maximum concurrent transcriptions (Azure has rate limits)
CONCURRENT_TRANSCRIPTIONS=50

# Seconds between polling Azure for job status
JOB_POLL_INTERVAL=10

# Process media when added to library (requires webhook integration)
PROCESS_ADDED_MEDIA=false

# Process media when played (requires webhook integration)
PROCESS_MEDIA_ON_PLAY=false

# ==============================================================================
# BAZARR INTEGRATION
# ==============================================================================
# Leave empty if not using Bazarr
BAZARR_URL=
BAZARR_API_KEY=

# ==============================================================================
# PLEX INTEGRATION (Optional)
# ==============================================================================
# Configure webhooks in Plex: Settings -> Webhooks -> Add Webhook
# URL: http://subgen-azure-batch:9000/plex
PLEX_SERVER=
PLEX_TOKEN=

# ==============================================================================
# JELLYFIN INTEGRATION (Optional)
# ==============================================================================
# Configure webhooks in Jellyfin: Dashboard -> Plugins -> Webhook
# URL: http://subgen-azure-batch:9000/jellyfin
JELLYFIN_SERVER=
JELLYFIN_TOKEN=

# ==============================================================================
# EMBY INTEGRATION (Optional)
# ==============================================================================
# Configure webhooks in Emby: Settings -> Notifications -> Webhooks
# URL: http://subgen-azure-batch:9000/emby
EMBY_SERVER=
EMBY_TOKEN=

# ==============================================================================
# PATH MAPPING
# ==============================================================================
# Use path mapping when container paths differ from host/media server paths
USE_PATH_MAPPING=false
# Example: Media server sees /data/tv but container mounts at /tv
PATH_MAPPING_FROM=
PATH_MAPPING_TO=

# ==============================================================================
# SKIP SETTINGS
# ==============================================================================
# Skip if subtitle for target language already exists
SKIP_IF_TARGET_SUBTITLES_EXIST=true

# Skip if any external subtitle exists
SKIP_IF_EXTERNAL_SUBTITLES_EXIST=false

# Skip if internal subtitles exist in this language (e.g., 'eng')
SKIP_IF_INTERNAL_SUBTITLES_LANGUAGE=

# Only skip if subtitle was created by SubGen (has '.subgen.' in filename)
SKIP_ONLY_SUBGEN_SUBTITLES=false

# Skip files where audio track is in these languages (pipe-separated, e.g., 'en|eng')
SKIP_IF_AUDIO_TRACK_IS=

# Skip if subtitles exist in these languages (pipe-separated, e.g., 'en|es|fr')
SKIP_SUBTITLE_LANGUAGES=

# Skip if audio track has unknown/undefined language
SKIP_UNKNOWN_LANGUAGE=false

# Skip if no audio language is set but subtitles already exist
SKIP_IF_NO_LANGUAGE_BUT_SUBTITLES_EXIST=false

# ==============================================================================
# TRANSCRIPTION OPTIONS
# ==============================================================================
# Force all transcriptions to use this language (e.g., 'en', 'es')
FORCE_DETECTED_LANGUAGE_TO=

# Append "Transcribed by SubGen-Azure-Batch" credit at end of subtitles
APPEND=false

# Write .lrc files for audio files instead of .srt
LRC_FOR_AUDIO_FILES=true

# Preferred audio languages for track selection (pipe-separated, e.g., 'eng|deu')
PREFERRED_AUDIO_LANGUAGES=

# Only transcribe files with audio in preferred languages
LIMIT_TO_PREFERRED_AUDIO_LANGUAGE=false

# Detect language on the first X seconds of audio
DETECT_LANGUAGE_LENGTH=30

# Start language detection X seconds into the file (skip intros)
DETECT_LANGUAGE_OFFSET=0

# Candidate locales for Azure language identification (max 4, comma-separated)
# Used by /detect-language endpoint for Bazarr integration
# See: https://learn.microsoft.com/azure/ai-services/speech-service/language-support?tabs=stt
LANGUAGE_DETECTION_CANDIDATES=en-US,nl-NL,es-ES,fr-FR

# ==============================================================================
# SUBTITLE NAMING
# ==============================================================================
# Language format in subtitle filename:
# ISO_639_1 (en), ISO_639_2_T (eng), ISO_639_2_B (eng), NAME (English), NATIVE (native name)
SUBTITLE_LANGUAGE_NAMING_TYPE=ISO_639_2_B

# Override language in subtitle filename (e.g., 'aa' to sort higher in Plex)
SUBTITLE_LANGUAGE_NAME=

# Include '.subgen' marker in subtitle filename
SHOW_IN_SUBNAME_SUBGEN=false

# ==============================================================================
# NOTIFICATIONS (Pushover)
# ==============================================================================
PUSHOVER_USER_KEY=
PUSHOVER_API_TOKEN=
NOTIFY_ON_FAILURE=true

# ==============================================================================
# DOCKER VOLUME PATHS (for docker-compose.yml)
# ==============================================================================
TV_PATH=/mnt/tv
MOVIES_PATH=/mnt/movies
